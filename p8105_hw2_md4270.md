p8105_hw2_md4270
================
Manye Dong
2023-09-30

``` r
library(tidyverse)
library(readr)
library(readxl)
```

## Problem 1

### clean pols_month dataset

``` r
# clean snp dataset
pols_month = 
  read_csv("pols-month.csv") |>
  janitor::clean_names() |>
  separate(mon, sep = "-", into = c("year", "month", "day")) |>
  mutate(year = as.numeric(year), month = as.numeric(month), 
         day = as.numeric(day), month = month.name[month],
         president = ifelse(prez_gop==0, "dem", "gop")) |>
  select(-c(prez_dem, prez_gop, day))

head(pols_month)
```

    ## # A tibble: 6 × 9
    ##    year month    gov_gop sen_gop rep_gop gov_dem sen_dem rep_dem president
    ##   <dbl> <chr>      <dbl>   <dbl>   <dbl>   <dbl>   <dbl>   <dbl> <chr>    
    ## 1  1947 January       23      51     253      23      45     198 dem      
    ## 2  1947 February      23      51     253      23      45     198 dem      
    ## 3  1947 March         23      51     253      23      45     198 dem      
    ## 4  1947 April         23      51     253      23      45     198 dem      
    ## 5  1947 May           23      51     253      23      45     198 dem      
    ## 6  1947 June          23      51     253      23      45     198 dem

### clean snp dataset

``` r
snp = 
  read_csv("snp.csv") |>
  janitor::clean_names() |>
  separate(date, sep = "/", into = c("month", "day", "year")) |>
  mutate(year = as.numeric(year), month = as.numeric(month), 
         day = as.numeric(day), month = month.name[month], 
         year = ifelse((50<=year & year<100), 1900+year, 2000+year)) |>
  select(year, month, close)

head(snp)
```

    ## # A tibble: 6 × 3
    ##    year month    close
    ##   <dbl> <chr>    <dbl>
    ## 1  2015 July     2080.
    ## 2  2015 June     2063.
    ## 3  2015 May      2107.
    ## 4  2015 April    2086.
    ## 5  2015 March    2068.
    ## 6  2015 February 2104.

### Clean Unemployment Dataset

``` r
unemployment = 
  read_csv("unemployment.csv") |>
  janitor::clean_names() |>
  pivot_longer(
    jan:dec,
    names_to = "month", 
    values_to = "umployment_percent") |>
  mutate(year = as.numeric(year), 
         month = recode(month, 
                   "jan" = "January", 
                   "feb" = "February", 
                   "mar" = "March", 
                   "apr" = "April", 
                   "may" = "May", 
                   "jun" = "June", 
                   "jul" = "July", 
                   "aug" = "August", 
                   "sep" = "September", 
                   "oct" = "October", 
                   "nov" = "November", 
                   "dec" = "December"))

head(unemployment)
```

    ## # A tibble: 6 × 3
    ##    year month    umployment_percent
    ##   <dbl> <chr>                 <dbl>
    ## 1  1948 January                 3.4
    ## 2  1948 February                3.8
    ## 3  1948 March                   4  
    ## 4  1948 April                   3.9
    ## 5  1948 May                     3.5
    ## 6  1948 June                    3.6

``` r
# merge the three datasets
joined = left_join(pols_month, snp) |>
  left_join(x = _, y = unemployment)
```

    ## Joining with `by = join_by(year, month)`
    ## Joining with `by = join_by(year, month)`

``` r
joined
```

    ## # A tibble: 822 × 11
    ##     year month   gov_gop sen_gop rep_gop gov_dem sen_dem rep_dem president close
    ##    <dbl> <chr>     <dbl>   <dbl>   <dbl>   <dbl>   <dbl>   <dbl> <chr>     <dbl>
    ##  1  1947 January      23      51     253      23      45     198 dem          NA
    ##  2  1947 Februa…      23      51     253      23      45     198 dem          NA
    ##  3  1947 March        23      51     253      23      45     198 dem          NA
    ##  4  1947 April        23      51     253      23      45     198 dem          NA
    ##  5  1947 May          23      51     253      23      45     198 dem          NA
    ##  6  1947 June         23      51     253      23      45     198 dem          NA
    ##  7  1947 July         23      51     253      23      45     198 dem          NA
    ##  8  1947 August       23      51     253      23      45     198 dem          NA
    ##  9  1947 Septem…      23      51     253      23      45     198 dem          NA
    ## 10  1947 October      23      51     253      23      45     198 dem          NA
    ## # ℹ 812 more rows
    ## # ℹ 1 more variable: umployment_percent <dbl>

Write a short paragraph about these datasets. Explain briefly what each
dataset contained, and describe the resulting dataset (e.g. give the
dimension, range of years, and names of key variables):

822 rows, 11 columns (without month_num and mon_abb, which is included
in the answer key).

## Problem 2

### Mr. Trash Wheel

``` r
mister_trash = 
  read_excel("202309 Trash Wheel Collection Data.xlsx", 
             sheet = "Mr. Trash Wheel", range = "A2:N586") |>
  janitor::clean_names() |>
  separate(date, sep ="-", into = c("year", "month", "day")) |>
  mutate(homes_powered = (weight_tons * 500) / 30, 
         month = month.abb[as.numeric(month)],
         wheel = "mister")

tail(mister_trash)
```

    ## # A tibble: 6 × 15
    ##   dumpster year  month day   weight_tons volume_cubic_yards plastic_bottles
    ##      <dbl> <chr> <chr> <chr>       <dbl>              <dbl>           <dbl>
    ## 1      579 2023  May   04           3.66                 15            2200
    ## 2      580 2023  May   04           2.62                 15            3100
    ## 3      581 2023  Jun   28           3.56                 15            3400
    ## 4      582 2023  Jun   28           3.79                 15            4000
    ## 5      583 2023  Jun   28           2.28                 10            2100
    ## 6      584 2023  Jun   29           3.9                  15            1900
    ## # ℹ 8 more variables: polystyrene <dbl>, cigarette_butts <dbl>,
    ## #   glass_bottles <dbl>, plastic_bags <dbl>, wrappers <dbl>,
    ## #   sports_balls <dbl>, homes_powered <dbl>, wheel <chr>

``` r
# load and clean the Professor Trash Wheel
prof_trash = 
  read_excel("202309 Trash Wheel Collection Data.xlsx", 
             sheet = "Professor Trash Wheel", range = "A2:M108") |>
  janitor::clean_names() |>
  separate(date, sep ="-", into = c("year", "month", "day")) |>
  mutate(homes_powered = (weight_tons * 500) / 30, 
         month = month.abb[as.numeric(month)],
         wheel = "professor")

tail(prof_trash)
```

    ## # A tibble: 6 × 14
    ##   dumpster year  month day   weight_tons volume_cubic_yards plastic_bottles
    ##      <dbl> <chr> <chr> <chr>       <dbl>              <dbl>           <dbl>
    ## 1      101 2022  Dec   29           2.13                 15            4200
    ## 2      102 2023  Feb   15           2.41                 15            2900
    ## 3      103 2023  Apr   10           2.05                 15              NA
    ## 4      104 2023  Apr   20           2.58                 15            3400
    ## 5      105 2023  Jun   16           1.85                 15            4100
    ## 6      106 2023  Jun   29           2.25                 15            3900
    ## # ℹ 7 more variables: polystyrene <dbl>, cigarette_butts <dbl>,
    ## #   glass_bottles <dbl>, plastic_bags <dbl>, wrappers <dbl>,
    ## #   homes_powered <dbl>, wheel <chr>

``` r
# load and clean the Professor Trash Wheel
gwynnda_trash = 
  read_excel("202309 Trash Wheel Collection Data.xlsx", 
             sheet = "Gwynnda Trash Wheel", range = "A2:L157") |>
  janitor::clean_names() |>
  separate(date, sep ="-", into = c("year", "month", "day")) |>
  mutate(homes_powered = (weight_tons * 500) / 30, 
         month = month.abb[as.numeric(month)],
         wheel = "gwynnda")

tail(gwynnda_trash)
```

    ## # A tibble: 6 × 13
    ##   dumpster year  month day   weight_tons volume_cubic_yards plastic_bottles
    ##      <dbl> <chr> <chr> <chr>       <dbl>              <dbl>           <dbl>
    ## 1      149 2023  Jun   28           2.68                 15            5400
    ## 2      150 2023  Jun   29           2.74                 15            4400
    ## 3      151 2023  Jun   29           3.12                 15            5000
    ## 4      152 2023  Jun   29           3.12                 15            3400
    ## 5      153 2023  Jun   29           3.45                 15            4900
    ## 6      154 2023  Jun   30           2.88                 15            2500
    ## # ℹ 6 more variables: polystyrene <dbl>, cigarette_butts <dbl>,
    ## #   plastic_bags <dbl>, wrappers <dbl>, homes_powered <dbl>, wheel <chr>

Now we combine those three datasets:

``` r
trash_wheels =
  bind_rows(mister_trash, prof_trash, gwynnda_trash) |>
  janitor::clean_names()

tail(trash_wheels)
```

    ## # A tibble: 6 × 15
    ##   dumpster year  month day   weight_tons volume_cubic_yards plastic_bottles
    ##      <dbl> <chr> <chr> <chr>       <dbl>              <dbl>           <dbl>
    ## 1      149 2023  Jun   28           2.68                 15            5400
    ## 2      150 2023  Jun   29           2.74                 15            4400
    ## 3      151 2023  Jun   29           3.12                 15            5000
    ## 4      152 2023  Jun   29           3.12                 15            3400
    ## 5      153 2023  Jun   29           3.45                 15            4900
    ## 6      154 2023  Jun   30           2.88                 15            2500
    ## # ℹ 8 more variables: polystyrene <dbl>, cigarette_butts <dbl>,
    ## #   glass_bottles <dbl>, plastic_bags <dbl>, wrappers <dbl>,
    ## #   sports_balls <dbl>, homes_powered <dbl>, wheel <chr>

Description:

## Problem 3

### Observational Study
